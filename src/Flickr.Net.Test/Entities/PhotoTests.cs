using System.Text;
using Flickr.Net.Flickrs.Results;
using Flickr.Net.Internals;
using Xunit;

namespace Flickr.Net.Test.Entities;

public class PhotoTests
{
    [Fact]
    public void JsonStringToPagedPhotos()
    {
        const string json = """{"photos":{"page":1,"pages":5,"perpage":100,"total":487,"photo":[{"id":"52931686549","owner":"192376927@N06","secret":"9b203d4894","server":"65535","farm":66,"title":"DSC04707","ispublic":1,"isfriend":0,"isfamily":0},{"id":"52931686554","owner":"192376927@N06","secret":"b77aff865b","server":"65535","farm":66,"title":"DSC04245","ispublic":1,"isfriend":0,"isfamily":0},{"id":"52931530976","owner":"192376927@N06","secret":"ae43237284","server":"65535","farm":66,"title":"DSC03469","ispublic":1,"isfriend":0,"isfamily":0},{"id":"52931979298","owner":"192376927@N06","secret":"50e1c9dec0","server":"65535","farm":66,"title":"DSC03529","ispublic":1,"isfriend":0,"isfamily":0},{"id":"52931924910","owner":"192376927@N06","secret":"d151c6e956","server":"65535","farm":66,"title":"DSC03406","ispublic":1,"isfriend":0,"isfamily":0},{"id":"52931915500","owner":"192376927@N06","secret":"f0231c6c97","server":"65535","farm":66,"title":"DSC02386","ispublic":1,"isfriend":0,"isfamily":0},{"id":"52931521611","owner":"192376927@N06","secret":"28acddacc2","server":"65535","farm":66,"title":"DSC02103","ispublic":1,"isfriend":0,"isfamily":0},{"id":"52931521576","owner":"192376927@N06","secret":"2b04200bb3","server":"65535","farm":66,"title":"DSC02008","ispublic":1,"isfriend":0,"isfamily":0},{"id":"52931648099","owner":"192376927@N06","secret":"4a99908be6","server":"65535","farm":66,"title":"DSC02103","ispublic":1,"isfriend":0,"isfamily":0},{"id":"52931888135","owner":"192376927@N06","secret":"3d8e24a905","server":"65535","farm":66,"title":"DSC02008","ispublic":1,"isfriend":0,"isfamily":0},{"id":"52930905862","owner":"192376927@N06","secret":"e6d0915877","server":"65535","farm":66,"title":"DSC02386","ispublic":1,"isfriend":0,"isfamily":0},{"id":"52931816680","owner":"192376927@N06","secret":"4ff3bf3227","server":"65535","farm":66,"title":"DSC02103","ispublic":1,"isfriend":0,"isfamily":0},{"id":"52931870848","owner":"192376927@N06","secret":"bae7f05bc8","server":"65535","farm":66,"title":"DSC02386","ispublic":1,"isfriend":0,"isfamily":0},{"id":"52931816640","owner":"192376927@N06","secret":"3d04c5a4fd","server":"65535","farm":66,"title":"DSC02008","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51766712220","owner":"192376927@N06","secret":"c5b8fe0950","server":"65535","farm":66,"title":"DSC04688","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51766711875","owner":"192376927@N06","secret":"14bdc1ba7a","server":"65535","farm":66,"title":"DSC04561","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51766711425","owner":"192376927@N06","secret":"28d220b2d6","server":"65535","farm":66,"title":"DSC04597","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51765834096","owner":"192376927@N06","secret":"356f7e8ede","server":"65535","farm":66,"title":"DSC04490","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51765002162","owner":"192376927@N06","secret":"e2e04231a7","server":"65535","farm":66,"title":"DSC04480","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51766463684","owner":"192376927@N06","secret":"fd37e0c9ca","server":"65535","farm":66,"title":"DSC03997","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51766701430","owner":"192376927@N06","secret":"3142c3e5a0","server":"65535","farm":66,"title":"DSC03998","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51765824156","owner":"192376927@N06","secret":"b86d6aba01","server":"65535","farm":66,"title":"DSC03996","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51766699855","owner":"192376927@N06","secret":"fa69243da0","server":"65535","farm":66,"title":"DSC04116","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51764990037","owner":"192376927@N06","secret":"1fdb4a8304","server":"65535","farm":66,"title":"DSC04471","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51765666861","owner":"192376927@N06","secret":"217cd728c9","server":"65535","farm":66,"title":"DSC03336","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51766301904","owner":"192376927@N06","secret":"af1176f2e7","server":"65535","farm":66,"title":"DSC03315","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51765663056","owner":"192376927@N06","secret":"9368a71b9c","server":"65535","farm":66,"title":"DSC03434","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51763798213","owner":"192376927@N06","secret":"1da8a32303","server":"65535","farm":66,"title":"DSC02780","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51762724927","owner":"192376927@N06","secret":"db91dfd817","server":"65535","farm":66,"title":"DSC02776","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51764206059","owner":"192376927@N06","secret":"3cfb63fa8a","server":"65535","farm":66,"title":"DSC02524","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51763555841","owner":"192376927@N06","secret":"43346e0573","server":"65535","farm":66,"title":"DSC02784","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51764425480","owner":"192376927@N06","secret":"e4e8e7f21b","server":"65535","farm":66,"title":"DSC02696","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51761968043","owner":"192376927@N06","secret":"93fd308b3e","server":"65535","farm":66,"title":"DSC01649","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51761726946","owner":"192376927@N06","secret":"ef2ab934ae","server":"65535","farm":66,"title":"DSC01616","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51760896252","owner":"192376927@N06","secret":"8b4e421a16","server":"65535","farm":66,"title":"DSC01653","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51544874056","owner":"192376927@N06","secret":"bf80a3dba4","server":"65535","farm":66,"title":"DSC01072","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51544078722","owner":"192376927@N06","secret":"efe79c8a7b","server":"65535","farm":66,"title":"DSC01124","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51544078192","owner":"192376927@N06","secret":"bc364b8710","server":"65535","farm":66,"title":"DSC01119","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51545798425","owner":"192376927@N06","secret":"6bfa169c79","server":"65535","farm":66,"title":"DSC01115","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51545112093","owner":"192376927@N06","secret":"8ecc761755","server":"65535","farm":66,"title":"DSC01022","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51544072762","owner":"192376927@N06","secret":"9b15d609ab","server":"65535","farm":66,"title":"DSC01047","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51545597094","owner":"192376927@N06","secret":"c9b15a7374","server":"65535","farm":66,"title":"DSC00961","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51545793320","owner":"192376927@N06","secret":"d8eef35729","server":"65535","farm":66,"title":"DSC01055","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51545111053","owner":"192376927@N06","secret":"65167d47f8","server":"65535","farm":66,"title":"DSC01005","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51532956455","owner":"192376927@N06","secret":"31ecd84ef5","server":"65535","farm":66,"title":"DSC00479","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51532751439","owner":"192376927@N06","secret":"8322179311","server":"65535","farm":66,"title":"DSC00478","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51532027156","owner":"192376927@N06","secret":"30a12e1981","server":"65535","farm":66,"title":"DSC00099","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51532025461","owner":"192376927@N06","secret":"193e1308ee","server":"65535","farm":66,"title":"DSC00131","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51532949310","owner":"192376927@N06","secret":"c23b30d692","server":"65535","farm":66,"title":"DSC00463","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51532948415","owner":"192376927@N06","secret":"ff88d0f9ce","server":"65535","farm":66,"title":"DSC00055","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51532947590","owner":"192376927@N06","secret":"13c857a39a","server":"65535","farm":66,"title":"DSC00203","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51531955581","owner":"192376927@N06","secret":"a99cbe5902","server":"65535","farm":66,"title":"DSC09989","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51531157602","owner":"192376927@N06","secret":"9db8a53798","server":"65535","farm":66,"title":"DSC09970","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51516693445","owner":"192376927@N06","secret":"ff32b0e192","server":"65535","farm":66,"title":"DSC09444","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51516693375","owner":"192376927@N06","secret":"b2101ee780","server":"65535","farm":66,"title":"DSC09424","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51515992548","owner":"192376927@N06","secret":"b141589e79","server":"65535","farm":66,"title":"DSC09396","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51515764486","owner":"192376927@N06","secret":"2b7409c181","server":"65535","farm":66,"title":"DSC09209","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51516481444","owner":"192376927@N06","secret":"073ecd8438","server":"65535","farm":66,"title":"DSC09419","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51514967722","owner":"192376927@N06","secret":"810fffa5a4","server":"65535","farm":66,"title":"DSC09093","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51515991303","owner":"192376927@N06","secret":"8eb4957a9c","server":"65535","farm":66,"title":"DSC09240","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51515722513","owner":"192376927@N06","secret":"70bf3a3552","server":"65535","farm":66,"title":"DSC08875","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51515496856","owner":"192376927@N06","secret":"777fc1b3ff","server":"65535","farm":66,"title":"DSC08908","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51516425680","owner":"192376927@N06","secret":"0b456ca59e","server":"65535","farm":66,"title":"DSC08936","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51515721508","owner":"192376927@N06","secret":"5a787a29c5","server":"65535","farm":66,"title":"DSC08898","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51515494596","owner":"192376927@N06","secret":"fcfc55417d","server":"65535","farm":66,"title":"DSC08951","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51436987476","owner":"192376927@N06","secret":"0424269d2d","server":"65535","farm":66,"title":"DSC08812","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51437956075","owner":"192376927@N06","secret":"fb2bef96da","server":"65535","farm":66,"title":"DSC08506","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51437734484","owner":"192376927@N06","secret":"2a52aeca89","server":"65535","farm":66,"title":"DSC08767","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51437955370","owner":"192376927@N06","secret":"4e494274e7","server":"65535","farm":66,"title":"DSC08537","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51436985941","owner":"192376927@N06","secret":"88b5c2acf0","server":"65535","farm":66,"title":"DSC08790","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51436984206","owner":"192376927@N06","secret":"9e32fdfe4b","server":"65535","farm":66,"title":"DSC08094","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51431549279","owner":"192376927@N06","secret":"73da3de630","server":"65535","farm":66,"title":"DSC07842","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51431775235","owner":"192376927@N06","secret":"c558dfe0cd","server":"65535","farm":66,"title":"DSC07619","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51431774625","owner":"192376927@N06","secret":"49e6dee1dc","server":"65535","farm":66,"title":"DSC07683","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51430802301","owner":"192376927@N06","secret":"e61bc4f3ee","server":"65535","farm":66,"title":"DSC07569","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51430041557","owner":"192376927@N06","secret":"e6cbb31c8e","server":"65535","farm":66,"title":"DSC07553","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51430039382","owner":"192376927@N06","secret":"d6d43bb6c7","server":"65535","farm":66,"title":"DSC07822","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51427158893","owner":"192376927@N06","secret":"f907d0a71d","server":"65535","farm":66,"title":"DSC06360","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51426910296","owner":"192376927@N06","secret":"81b21eb438","server":"65535","farm":66,"title":"DSC06775","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51387712305","owner":"192376927@N06","secret":"dc07bbb5cb","server":"65535","farm":66,"title":"DSC05519","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51387708785","owner":"192376927@N06","secret":"c7f2fdf334","server":"65535","farm":66,"title":"DSC05379","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51387437519","owner":"192376927@N06","secret":"09b7b50295","server":"65535","farm":66,"title":"DSC05501","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51386947273","owner":"192376927@N06","secret":"b7f936127c","server":"65535","farm":66,"title":"DSC05401","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51385941217","owner":"192376927@N06","secret":"17818393f6","server":"65535","farm":66,"title":"DSC05472","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51386698751","owner":"192376927@N06","secret":"c18c12b533","server":"65535","farm":66,"title":"DSC05507","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51387614605","owner":"192376927@N06","secret":"846cf6f929","server":"65535","farm":66,"title":"DSC04999","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51386855113","owner":"192376927@N06","secret":"0a92aa4a2e","server":"65535","farm":66,"title":"DSC04912","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51385849137","owner":"192376927@N06","secret":"ec8c48529a","server":"65535","farm":66,"title":"DSC04879","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51387343949","owner":"192376927@N06","secret":"f0003352d6","server":"65535","farm":66,"title":"DSC05100","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51387613675","owner":"192376927@N06","secret":"d2acc3a48e","server":"65535","farm":66,"title":"DSC04830","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51385453629","owner":"192376927@N06","secret":"37e19bdc30","server":"65535","farm":66,"title":"DSC02797","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51385451574","owner":"192376927@N06","secret":"8c0d4e4e14","server":"65535","farm":66,"title":"DSC03182","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51385719790","owner":"192376927@N06","secret":"fb6676baee","server":"65535","farm":66,"title":"DSC03606","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51367920773","owner":"192376927@N06","secret":"36d6a085fb","server":"65535","farm":66,"title":"DSC02554","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51367920003","owner":"192376927@N06","secret":"8199b12acf","server":"65535","farm":66,"title":"DSC02325","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51368436879","owner":"192376927@N06","secret":"1bd6cf765f","server":"65535","farm":66,"title":"DSC02343","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51368436854","owner":"192376927@N06","secret":"9f35bc5594","server":"65535","farm":66,"title":"DSC02334","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51366939317","owner":"192376927@N06","secret":"3a425b494b","server":"65535","farm":66,"title":"DSC02348","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51367919483","owner":"192376927@N06","secret":"78d9106b46","server":"65535","farm":66,"title":"DSC02210","ispublic":1,"isfriend":0,"isfamily":0},{"id":"51317772177","owner":"192376927@N06","secret":"1e5b2d7522","server":"65535","farm":66,"title":"DSC01810","ispublic":1,"isfriend":0,"isfamily":0}]},"stat":"ok"}""";

        var result = FlickrConvert.DeserializeObject<FlickrResult<PagedPhotos>>(Encoding.UTF8.GetBytes(json));

        Assert.NotNull(result);
        Assert.False(result.HasError);
        var items = result.Content;
        Assert.IsType<PagedPhotos>(items);
        Assert.NotEmpty(items.Values);
        Assert.IsType<Photo>(items.Values[0]);
        Assert.Equal(487, items.Total);
        Assert.True(items.Values[0].IsPublic);
        Assert.False(items.Values[0].IsFriend);
        Assert.False(items.Values[0].IsFamily);
    }
}
